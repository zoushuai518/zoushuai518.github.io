---
layout: post
title: "mysql事务"
category: mysql
comments: true
date:   2014-11-19 16:16:51
---

####一. 定义

    事务是DBMS得执行单位。它由有限的数据库操作序列组成得。但不是任意的数据库操作序列都能成为事务。一般来说，事务是必须满足4个条件（ACID）

    - 原子性（Autmic）：确保工作单元内的所有操作都成功完成，否则事务将被中止在故障点，和以前的操作将回滚到以前的状态。即使因为故障而使事务不能完成，在rollback时也要消除对数据库得影响！
    - 一致性（Consistency）：事务的操作应该使数据库从一个一致状态转变倒另一个一致的状态！
    - 隔离性（Isolation）：如果多个事务并发执行，要确保事务操作彼此独立和透明！
    - 持久性（Durability）：一个成功执行得事务对数据库得作用是持久得，即使数据库应故障出错，也应该能够恢复！


####二. mysql实现事务

MYSQL的事务处理主要有两种方法。

    1、用begin,rollback,commit来实现

        - begin 开始一个事务
        - rollback 事务回滚
        - commit  事务确认

    2、直接用set来改变mysql的自动提交模式来实现事务的处理

        MYSQL默认是自动提交的，也就是你提交一个QUERY，它就直接执行！我们可以通过

        set autocommit=0   禁止自动提交

        set autocommit=1 开启自动提交

但注意当你用 set autocommit=0 的时候，你以后所有的SQL都将做为事务处理，直到你用commit确认或rollback结束，注意当你结束这个事务的同时也开启了个新的事务！按第一种方法只将当前的作为一个事务！

推荐使用第一种方式

MYSQL中只有INNODB和BDB类型的数据表才能支持事务处理！其他的类型是不支持！

