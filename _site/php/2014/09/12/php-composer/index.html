

<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <!--[if lte IE 9]><meta http-equiv="refresh" content="0;url=/ie.html"><![endif]-->

    <title>php composer</title>
    <meta name="description" content="">

    <link href="/assets/themes/p233/css/pygments.css" rel="stylesheet">
    <link href="/assets/themes/p233/css/style.css" rel="stylesheet">

    <!-- atom & rss feed || zs fuck! -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">
  </head>
  <body>
    <aside id="sidebar">
      <nav id="tags">
        <a href="/index.html" id="avatar"></a>

		<!-- 分类 -->
		<ul id="tags__ul">
	<li id="js-label1" class="tags__li tags-btn active">全部文章</li>
	
	<li id="js-label2" class="tags__li tags-btn">jekyll (9)</li>
	
	<li id="js-label3" class="tags__li tags-btn">php (28)</li>
	
	<li id="js-label4" class="tags__li tags-btn">tool (1)</li>
	
	<li id="js-label5" class="tags__li tags-btn">python (1)</li>
	
	<li id="js-label6" class="tags__li tags-btn">ruby (1)</li>
	
	<li id="js-label7" class="tags__li tags-btn">linux (4)</li>
	
	<li id="js-label8" class="tags__li tags-btn">asset (3)</li>
	
	<li id="js-label9" class="tags__li tags-btn">standard (1)</li>
	
	<li id="js-label10" class="tags__li tags-btn">agreement (2)</li>
	
	<li id="js-label11" class="tags__li tags-btn">mysql (1)</li>
	
</ul>


        <div id="tags__bottom">
          <a href="mailto:zoushuai518@gmail.com" id="icon-email" class="tags-btn fontello"></a>
          <a href="/rss.xml" id="icon-feed" class="tags-btn fontello"></a>
        </div>
      </nav> <!-- end #tags -->

      <div id="posts-list">
        <form action="" id="search-form">
          <a href="/index.html" id="mobile-avatar"></a>
          <!-- NOTE: input field is disabled by default -->
          <input id="search-input" type="text" placeholder="Search..." disabled >
        </form>

        <nav id="pl__container">
        
          <a class="php pl__all" href="/php/2014/09/26/php-session%E5%85%B1%E4%BA%AB"><span class="pl__circle"></span><span class="pl__title">PHP session共享</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="php pl__all" href="/php/2014/09/26/php-session_cookie"><span class="pl__circle"></span><span class="pl__title">PHP session cookie</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="php pl__all" href="/php/2014/09/25/php-factory"><span class="pl__circle"></span><span class="pl__title">PHP设计模式之工厂模式(Factory Pattern)</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="php pl__all" href="/php/2014/09/24/php-singleton"><span class="pl__circle"></span><span class="pl__title">PHP设计模式之单例模式与静态变量</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="asset pl__all" href="/asset/2014/09/19/nodejs"><span class="pl__circle"></span><span class="pl__title">nodejs</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="php pl__all" href="/php/2014/09/18/php%E5%8A%A8%E6%80%81%E5%8F%98%E9%87%8F%EF%BC%8C%E9%9D%99%E6%80%81%E5%8F%98%E9%87%8F%EF%BC%8C%E5%A0%86%E5%92%8C%E6%A0%88%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="pl__circle"></span><span class="pl__title">动态变量，静态变量，堆和栈的区别</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="php pl__all" href="/php/2014/09/18/php-%E7%B1%BB%E5%9E%8B%E7%BA%A6%E6%9D%9F"><span class="pl__circle"></span><span class="pl__title">PHP 类型约束</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="php pl__all" href="/php/2014/09/18/php-%E5%8F%8D%E5%B0%84"><span class="pl__circle"></span><span class="pl__title">php 反射</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="php pl__all" href="/php/2014/09/18/php-spl"><span class="pl__circle"></span><span class="pl__title">php spl</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="php pl__all" href="/php/2014/09/18/php-oop"><span class="pl__circle"></span><span class="pl__title">PHP OOP</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="php pl__all" href="/php/2014/09/18/php-instanceof%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="pl__circle"></span><span class="pl__title">PHP instanceof运算符</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="php pl__all" href="/php/2014/09/18/php-AOP"><span class="pl__circle"></span><span class="pl__title">php AOP</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="php pl__all" href="/php/2014/09/18/php-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="pl__circle"></span><span class="pl__title">php生命周期</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="php pl__all" href="/php/2014/09/18/php-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3DIP%E3%80%81IoC%E3%80%81DI%E4%BB%A5%E5%8F%8AIoC%E5%AE%B9%E5%99%A8"><span class="pl__circle"></span><span class="pl__title">深入理解DIP、IoC、DI以及IoC容器</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="php pl__all" href="/php/2014/09/18/php-%E9%9D%A2%E8%AF%95"><span class="pl__circle"></span><span class="pl__title">php 面试题</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="php pl__all" href="/php/2014/09/18/php-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="pl__circle"></span><span class="pl__title">php 设计模式</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="php pl__all" href="/php/2014/09/18/php-technology-site"><span class="pl__circle"></span><span class="pl__title">php 的那些事儿</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="agreement pl__all" href="/agreement/2014/09/18/http"><span class="pl__circle"></span><span class="pl__title">http协议</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="mysql pl__all" href="/mysql/2014/09/18/gaoxiao-sql"><span class="pl__circle"></span><span class="pl__title">编写高效的SQL</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="php pl__all" href="/php/2014/09/17/php-DI_IoC"><span class="pl__circle"></span><span class="pl__title">php 依赖注入(DI) & 控制反转(IoC)</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="linux pl__all" href="/linux/2014/09/17/shell"><span class="pl__circle"></span><span class="pl__title">Linux shell</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="linux pl__all" href="/linux/2014/09/17/nginx-https-config"><span class="pl__circle"></span><span class="pl__title">nginx https配置</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="agreement pl__all" href="/agreement/2014/09/17/https"><span class="pl__circle"></span><span class="pl__title">https协议</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="standard pl__all" href="/standard/2014/09/17/Rest_API"><span class="pl__circle"></span><span class="pl__title">Rest API标准</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="php pl__all" href="/php/2014/09/16/php-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6"><span class="pl__circle"></span><span class="pl__title">php 垃圾回收机制</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="php pl__all" href="/php/2014/09/16/laravel"><span class="pl__circle"></span><span class="pl__title">golaravel</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="asset pl__all" href="/asset/2014/09/16/front-list"><span class="pl__circle"></span><span class="pl__title">前端技术</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="php pl__all" href="/php/2014/09/16/create-composer_packagist"><span class="pl__circle"></span><span class="pl__title">创建一个自己的 Composer/Packagist包</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="asset pl__all" href="/asset/2014/09/16/PJAX"><span class="pl__circle"></span><span class="pl__title">PJAX</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="jekyll pl__all" href="/jekyll/2014/09/16/zs-jekyll-blog"><span class="pl__circle"></span><span class="pl__title">基于Jekyll github创建自己的blog系统</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="jekyll pl__all" href="/jekyll/2014/09/16/jekyll-3-theme"><span class="pl__circle"></span><span class="pl__title">jekyll dazzle theme</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="jekyll pl__all" href="/jekyll/2014/09/13/github-jekyll-markdown"><span class="pl__circle"></span><span class="pl__title">使用 GitHub, Jekyll 打造自己的独立博客</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="linux pl__all" href="/linux/2014/09/12/find"><span class="pl__circle"></span><span class="pl__title">Linux命令之find</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="linux pl__all" href="/linux/2014/09/12/crontab"><span class="pl__circle"></span><span class="pl__title">Linux命令之crontab</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="ruby pl__all" href="/ruby/2014/09/12/ruby-init"><span class="pl__circle"></span><span class="pl__title">ruby</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="python pl__all" href="/python/2014/09/12/python-init"><span class="pl__circle"></span><span class="pl__title">python</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="php pl__all" href="/php/2014/09/12/php%E5%B9%B6%E5%8F%91%E5%86%99%E6%96%87%E4%BB%B6_%E6%96%87%E4%BB%B6%E9%94%81"><span class="pl__circle"></span><span class="pl__title">php 并发写文件|文件锁</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="php pl__all" href="/php/2014/09/12/phpdoc"><span class="pl__circle"></span><span class="pl__title">phpdoc|phpDocumentor</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="php pl__all" href="/php/2014/09/12/php_pear_pecl"><span class="pl__circle"></span><span class="pl__title">php pear|pecl</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="php pl__all" href="/php/2014/09/12/php-composer"><span class="pl__circle"></span><span class="pl__title">php composer</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="php pl__all" href="/php/2014/09/12/memory_get_usage"><span class="pl__circle"></span><span class="pl__title">获得PHP代码占用内存的情况</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="jekyll pl__all" href="/jekyll/2014/09/12/jekyll-%E4%B8%AD%E7%9A%84%E8%AF%AD%E6%B3%95%E9%AB%98%E4%BA%AE"><span class="pl__circle"></span><span class="pl__title">jekyll中的语法高亮</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="tool pl__all" href="/tool/2014/09/12/git%E4%BB%8B%E7%BB%8D"><span class="pl__circle"></span><span class="pl__title">Git分布式版本管理工具</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="php pl__all" href="/php/2014/09/12/PHP%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84%E5%88%86%E9%85%8D"><span class="pl__circle"></span><span class="pl__title">PHP对象类型在内存中的分配</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="jekyll pl__all" href="/jekyll/2014/09/12/%E5%85%B3%E4%BA%8EJekyll"><span class="pl__circle"></span><span class="pl__title">关于Jekyll</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="jekyll pl__all" href="/jekyll/2014/09/12/jekyll-%E6%A8%A1%E6%9D%BF%E4%BD%BF%E7%94%A8"><span class="pl__circle"></span><span class="pl__title">Jekyll模板使用</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="jekyll pl__all" href="/jekyll/2014/09/12/jekyll-%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91"><span class="pl__circle"></span><span class="pl__title">Jekyll插件开发</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="php pl__all" href="/php/2014/09/12/%E4%BB%8B%E7%BB%8Dyii2"><span class="pl__circle"></span><span class="pl__title">yii2介绍</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="php pl__all" href="/php/2014/09/11/php-%E5%8A%A0%E5%AF%86%E8%A7%A3%E5%AF%86"><span class="pl__circle"></span><span class="pl__title">php加密解密</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="jekyll pl__all" href="/jekyll/2014/09/05/ubuntu-use-jekyll"><span class="pl__circle"></span><span class="pl__title">jekyll 使用教程</span><span class="pl__date">Sep 2014</span></a>
        
          <a class="jekyll pl__all" href="/jekyll/2014/09/05/ubuntu-install-jekyll"><span class="pl__circle"></span><span class="pl__title">jekyll 安装教程</span><span class="pl__date">Sep 2014</span></a>
        
        </nav>
      </div> <!-- end #posts-list -->
    </aside> <!-- end #sidebar -->

    <div id="post">
      <div id="pjax">
        

<article id="post__content" class="fmt">
  <h1 id="post__title" data-identifier="20140912">php composer</h1>
  <h1>php 包管理之 composer</h1>

<p><strong><em>简介：</em></strong></p>

<ul>
<li>对于现代语言而言，包管理器基本上是标配。Java有Maven，Python有pip，Ruby有gem，Nodejs有npm。PHP的则是<a href="http://pear.php.net/">PEAR</a></li>
<li>简单来说，Composer 是一个新的安装包管理工具，服务于 PHP 生态系统。它实际上包含了两个部分：Composer 和 Packagist.下面我们就简单说一下他们各自的用途。</li>
</ul>


<p><strong><em>概念：</em></strong></p>

<ul>
<li>Composer：
简单来说，Composer 是一个新的安装包管理工具，服务于 PHP 生态系统。它实际上包含了两个部分：<a href="https://github.com/composer/composer">Composer</a> 和 <a href="http://packagist.org/">Packagist</a>.下面我们就简单说一下他们各自的用途。<br/>
Composer 是由 Jordi Boggiano 和 Nils Aderman 创造的一个命令行工具，它的使命就是帮你为项目自动安装所依赖的开发包。Composer 中的很多理念都借鉴了 npm 和 Bundler，如果你对这两个工具有所了解的话，就会在 composer 中发现他们的身影。Composer 包含了一个依赖解析器，用来处理开发包之间复杂的依赖关系；另外，它还包含了下载器、安装器等有趣的东西。<br/>
作为一个用户，你所要做的就是在 <code>composer.json</code> 文件中声明当前项目所依赖的开发包，然后运行 <code>composer.phar install</code> 就行了。<code>composer.json</code> 文件定义了当前项目所依赖的开发包和 composer 的配置信息。下面是一个小型实例：</li>
</ul>


<pre><code>
{
    "require": {
        "monolog/monolog": "1.2.*"
    }
}
</code></pre>


<ul>
<li>Packagist：
Packagist 是 Composer 的默认的开发包仓库。你可以将自己的安装包提交到 packagist，将来你在自己的 VCS （源码管理软件，比如 Github） 仓库中新建了 tag 或更新了代码，packagist 都会自动构建一个新的开发包。这就是 packagist 目前的运作方式，将来 packagist 将允许直接上传开发包。</li>
</ul>


<h1>一.前言：</h1>

<p>1.php PEAR包管理有很多问题</p>

<ul>
<li>依赖处理容易出问题</li>
<li>配置复杂.</li>
<li>命令行接口难用.</li>
</ul>


<p>2.composer，是新出的php依赖管理工具</p>

<ul>
<li>开源.</li>
<li>使用简单.</li>
<li>可以简单的提交自己的开发包.</li>
</ul>


<h1>二.安装composer:</h1>

<p>Composer需要php 5.3.2+才能运行</p>

<pre>
<span class="Variable">$</span>curl -sS <span class="symbol">https:</span>/<span class="regex">/getcomposer.org/installer</span> | php
</pre>


<p>这个命令会将<code>composer.phar</code>下载到当前目录。PHAR（PHP 压缩包）是一个压缩格式，可以在命令行下直接运行<br/>
你可以使用<code>--install-dir</code>选项将Composer安装到指定的目录，例如：</p>

<pre>
<span class="Variable">$</span>curl -sS<span class="symbol"> https:</span>/<span class="regex">/getcomposer.org/installer</span> | php -- --install-dir=bin
</pre>


<p>当然也可以进行全局安装：</p>

<pre>
<span class="Variable">$</span>curl -sS<span class="symbol"> https:</span>/<span class="regex">/getcomposer.org/installer</span> | php
<span class="Variable">$</span>mv composer.phar /usr/local/bin/composer
</pre>


<p>不过通常情况下只需将<code>composer.phar</code>的位置加入到<code>PATH</code>就可以，不一定要全局安装</p>

<h1>三.声明依赖</h1>

<p>在项目目录下创建一个composer.json文件，指明依赖，比如，你的项目依赖 <a href="https://github.com/Seldaek/monolog">monolog：</a><br/>
<code>
{
    "require": {
        "monolog/monolog": "1.2.*"
    }
}
</code></p>

<h1>四.安装依赖</h1>

<p>安装依赖非常简单，只需在项目目录下运行：<br/>
<code>composer install</code></p>

<p>如果没有全局安装的话，则运行：<br/>
<code>php composer.phar install</code></p>

<h1>五.自动加载</h1>

<p>Composer提供了自动加载的特性，只需在你的代码的初始化部分中加入下面一行：<br/>
<code>require 'vendor/autoload.php';</code></p>

<h1>六.模块仓库</h1>

<p><a href="https://packagist.org/">packagist.org</a>是Composer的仓库，很多著名的PHP库都能在其中找到。你也可以<a href="https://packagist.org/packages/submit">提交你自己的作品</a>。</p>

<h1>七.高级特性(5个Composer小技巧)</h1>

<p>Composer是新一代的PHP依赖管理工具</p>

<h3>1. 仅更新单个库</h3>

<p>只想更新某个特定的库，不想更新它的所有依赖，很简单：</p>

<pre>
composer update foo/bar
</pre>


<p>此外，这个技巧还可以用来解决“警告信息问题”。你一定见过这样的警告信息：</p>

<pre>
Warning: The lock file is not up to date with the latest changes in composer.json, you may be getting outdated dependencies, run update to update them.
</pre>


<p>擦，哪里出问题了？别惊慌！如果你编辑了<code>composer.json</code>，你应该会看到这样的信息。比如，如果你增加或更新了细节信息，比如库的描述、作者、更多参数，甚至仅仅增加了一个空格，都会改变文件的md5sum。然后<code>Composer</code>就会警告你哈希值和<code>composer.lock</code>中记载的不同。</p>

<p>那么我们该怎么办呢？<code>update</code>命令可以更新lock文件，但是如果仅仅增加了一些描述，应该是不打算更新任何库。这种情况下，只需<code>update nothing</code>：</p>

<pre>$ composer update nothing<br />
Loading composer repositories <span class="string">with package information</span><br />
<span class="red">Updating dependencies<br />
Nothing to install or update<br />
Writing lock file<br />
Generating autoload files</span>
</pre>


<p>这样一来，<code>Composer</code>不会更新库，但是会更新<code>composer.lock</code>。注意<code>nothing</code>并不是<code>update</code>命令的关键字。只是没有<code>nothing</code> 这个包导致的结果。如果你输入<code>foobar</code>，结果也一样。<br/>
如果你用的Composer版本足够新，那么你可以直接使用<code>--lock</code>选项：</p>

<pre>
composer <span class="string">update --lock</span>
</pre>


<h3>2. 不编辑composer.json的情况下安装库</h3>

<p>你可能会觉得每安装一个库都需要修改composer.json太麻烦，那么你可以直接使用require命令。<br/>
<code>
composer require "foo/bar:1.0.0"
</code></p>

<p>这个方法也可以用来快速地新开一个项目。<code>init</code>命令有<code>--require</code>选项，可以自动编写<code>composer.json</code>：（注意我们使用<code>-n</code>，这样就不用回答问题）</p>

<pre>
<code>
$ composer init --require=foo/bar:1.0.0 -n
$ cat composer.json
</code>
<code>
{
    "require": {
        "foo/bar": "1.0.0"
    }
}
</code>
</pre>


<h3>3. 派生很容易</h3>

<p>初始化的时候，你试过<code>create-project</code>命令么<br/>
<code>
composer create-project doctrine/orm path 2.2.0
</code>
这会自动克隆仓库，并检出指定的版本。克隆库的时候用这个命令很方便，不需要搜寻原始的URI了。</p>

<h3>4. 考虑缓存，dist包优先</h3>

<p>最近一年以来的Composer会自动存档你下载的dist包。默认设置下，dist包用于加了tag的版本，例如<code>"symfony/symfony": "v2.1.4"</code>，或者是通配符或版本区间，<code>"2.1.*"</code>或<code>">=2.2,&lt;2.3-dev"</code>（如果你使用<code>stable</code>作为你的<code>minimum-stability</code>。</p>

<p>dist包也可以用于诸如<code>dev-master</code>之类的分支，Github允许你下载某个git引用的压缩包。为了强制使用压缩包，而不是克隆源代码，你可以使用<code>install</code>和<code>update</code>的<code>--prefer-dist</code>选项。</p>

<p>下面是一个例子（我使用了<code>--profile</code>选项来显示执行时间）：</p>

<pre>
$ composer init --require="twig/twig:1.*" -n --profile
Memory usage: 3.94MB (peak: 4.08MB), time: 0s

$ composer install --profile
Loading composer repositories with package information
Installing dependencies
  - Installing twig/twig (v1.12.2)
    Downloading: 100%

Writing lock file
Generating autoload files
Memory usage: 10.13MB (peak: 12.65MB), time: 4.71s

$ rm -rf vendor

$ composer install --profile
Loading composer repositories with package information
Installing dependencies from lock file
  - Installing twig/twig (v1.12.2)
    Loading from cache

Generating autoload files
Memory usage: 4.96MB (peak: 5.57MB), time: 0.45s
</pre>


<p>这里，<code>twig/twig:1.12.2</code>的压缩包被保存在<code>~/.composer/cache/files/twig/twig/1.12.2.0-v1.12.2.zip</code>。重新安装包时直接使用。</p>

<h3>5. 考虑修改，源代码优先</h3>

<p>当你需要修改库的时候，克隆源代码就比下载包方便了。你可以使用<code>--prefer-source</code>来强制选择克隆源代码。</p>

<pre>
<code>composer</code> update symfony/yaml --prefer-source
</pre>


<p>接下来你可以修改文件：</p>

<pre>
composer status -v
You have changes in the following dependencies:
/path/to/app/vendor/symfony/yaml/Symfony/Component/Yaml:
    M Dumper.php
</pre>


<p>当你试图更新一个修改过的库的时候，Composer会提醒你，询问是否放弃修改：</p>

<pre>
$ composer update
Loading composer repositories with package information
Updating dependencies
  - Updating symfony/symfony v2.2.0 (v2.2.0- => v2.2.0)
    The package has modified files:
    M Dumper.php
    Discard changes [y,n,v,s,?]?
</pre>


<h1>为生产环境作准备</h1>

<p>最后提醒一下，在部署代码到生产环境的时候，别忘了优化一下自动加载：</p>

<pre>
<code>composer</code> dump-autoload --optimize
</pre>


<p>安装包的时候可以同样使用<code>--optimize-autoloader</code>。不加这一选项，你可能会发现<a href="http://www.ricardclau.com/2013/03/apc-vs-zend-optimizer-benchmarks-with-symfony2/">20%到25%的性能损失</a>。</p>

<p>如果你需要帮助，或者想要了解某个命令的细节，你可以阅读<a href="http://getcomposer.org/">官方文档</a>，或者查看JoliCode做的这个<a href="http://www.ricardclau.com/2013/03/apc-vs-zend-optimizer-benchmarks-with-symfony2/">交互式备忘单</a>。</p>

<h1>八.Composer更换国内镜像</h1>

<ul>
<li><p>安装composer，不再赘述</p></li>
<li><p>修改配置，使用中国镜像 先找到config文件
<code>sudo composer config -l -g</code></p></li>
</ul>


<h2><img src="/assets/postImage/php/composer-modify-image-1.png" title="composer-modify-image" alt="composer-modify-image" /></h2>

<p>修改配置文件<br/>
<code>$ sudo vim /root/.composer/config.json</code><br/>
增加镜像地址</p>

<pre><code>
{
    "repositories": [
        {"type": "composer", "url": "http://pkg.phpcomposer.com/repo/packagist/"},
        {"packagist": false}
    ]
}
</code></pre>


<p>修改完成，保存退出</p>

<h2><img src="/assets/postImage/php/composer-modify-image-2.png" title="composer-modify-image" alt="composer-modify-image" /></h2>

<ul>
<li><p>更新composer
<code>
$ composer self-update
</code></p></li>
<li><p>创建自己的composer项目</p></li>
</ul>


<pre>
# 创建项目目录
<code>$ mkdir project</code>
<code>$ cd project</code>
# 增加依赖引入swoole_framework框架包，当然也可以是其他包
<code>$ composer require "matyhtf/swoole_framework:dev-master"</code>
</pre>


<p><a href="http://www.phpcomposer.com/">php composer</a><br/>
<a href="https://getcomposer.org/">getcomposer</a><br/>
<a href="http://docs.phpcomposer.com/">php composer docs</a><br/>
<a href="https://packagist.org/">packagist</a></p>

</article> <!-- end #post__content -->

<div id="post__share">
  <a id="icon-twitter" class="fontello" href="https://twitter.com/intent/tweet?url=place_your_url_here/php/2014/09/12/php-composer&text=php composer" target="_blank"></a>
  <a id="icon-cc" class="fontello" href="http://creativecommons.org/licenses/by-nc-sa/3.0" target="_blank"></a>
  <a id="icon-weibo" class="fontello" href="http://v.t.sina.com.cn/share/share.php?url=place_your_url_here/php/2014/09/12/php-composer&title=php composer" target="_blank"></a>
</div> <!-- end #post__share -->

<div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink" target="_blank">Loading Disqus comments...</a>
</div> <!-- end #disqus_thread -->


      </div> <!-- end #pjax -->

      <div id="post__toc-trigger">
        <div id="post__toc">
          <span id="post__toc-title">Table of Contents</span>
          <ul id="post__toc-ul"></ul>
        </div>
      </div>
    </div> <!-- end #post -->

    <button id="js-fullscreen"><span id="icon-arrow" class="fontello"></span></button>

    <script src="/assets/themes/p233/js/jquery-2.0.3.min.js"></script>
    <script src="/assets/themes/p233/js/jquery.pjax.js"></script>
    <script src="/assets/themes/p233/js/nprogress.js"></script>
	<!-- 语法高亮 -->
	<!-- <script src="/assets/themes/p233/js/prism.js"></script> -->
	<!-- <script src="/assets/themes/p233/js/jquery-tapir.js"></script> -->
    <script src="/assets/themes/p233/js/script.js"></script>
  </body>
</html>

